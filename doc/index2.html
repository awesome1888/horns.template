    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <body>

        <script src="../src/parser.js"></script>
        <script>
            var tests = [

                {
                    template: "   Вступив в бой с {{animalAdj animal.bad}} {{  animal.bad  }} — {{  #  if animalIsSnake}}эфой и гадюкой{{elseif animalIsFromLionKing}} {{if animalIsLion}}симбой и мега-симбой{{else}}тимоном и пумбой{{endif}}{{else}}неизвестными{{/if}}, {{if hasWeapon}}(из оружия было: {{weapon.name}} ({{weapon.slot.type}} {{weapon.slot.name}})){{endif}}— {{animalAdjGood}} {{animal.good}} {{whatGoodAnimalDid}}",
                    data: {
                        'animal': {'good': 'ежик', bad: 'мангустом и кабаном'},
                        weapon: {name: 'монтировка', slot: {name: 'рука', type:'левая'}}
                        //'unescaped': 'unescaped',
                        //'one': {'Helper': {'Value':'value'}}
                    }
                },

                /*
                {
                    template: "Тест {{#ifEmu}}logic-less if{{/ifEmu}}, а этот мусор не будет показан: {{#ifNotEmu}}МУСОР!{{/ifNotEmu}}",
                    data: {
                        ifEmu: true,
                        ifNotEmu: false
                    }
                },
                {
                    template: "Это тест оператора {{opName}}. Повторения: {{#several}} Имя: {{name}} {{/several}}",
                    data: {
                        opName: 'цикла',
                        several: [
                            {
                                name: 'Joe Black'
                            },
                            {
                                name: 'Kalvin Klein'
                            },
                            {
                                name: 'Howard the Duck'
                            }
                        ]
                    }
                },
                {
                    template: "Это {{safe}}, а это {{{unsafe}}}",
                    data: {
                        safe: 'безопасно',
                        unsafe: "<b>небезопасно</b>"
                    },
                    name: 'nested'
                },
                {
                    template: "Про {{what}} {{{>nested}}}: это только что был вложенный шаблон",
                    data: {
                        what: 'безопасность',
                    }
                }
                */
            ];

            for(var k in tests)
            {
                var p = new Horns.compile(tests[k].template);

                /*
                p.registerHelper('iftestHelper', function(obj){
                    return 'результат тестового хелпера';
                });
                p.registerHelper('oneHelper', function(obj){

                    return obj == 'value';//'>'+obj+'<';
                });
                p.registerHelper('hz', function(obj){
                    return false;
                });
                p.registerHelper('anotherHelper', function(){
                    return true;
                });


                */
                p.registerHelper('animalAdj', function(animal){

                    if(animal == 'змеями')
                    {
                        return 'шипящими';
                    }
                    else if(animal == 'верблюдами')
                    {
                        return 'флегматичными';
                    }
                    else if(animal == 'львами')
                    {
                        return 'грациозными';
                    }
                    else
                    {
                        return 'неизвестными';
                    }
                });

                p.registerHelper('animalAdjGood', function(){
                   if(this.animal.good == 'ежик')
                   {
                       return ['маленький', 'цепкий', 'храбрый'].join(', ');
                   }
                   else if(this.animal.good == 'слон')
                   {
                       return 'хитрый';
                   }
                });

                p.registerHelper('animalIsSnake', function(){
                    return this.animal.bad == 'змеями';
                });

                p.registerHelper('animalIsLion', function(){
                    return this.animal.bad == 'львами';
                });

                p.registerHelper('animalIsFromLionKing', function(){
                    return this.animal.bad == 'львами' || this.animal.bad == 'мангустом и кабаном';
                });

                p.registerHelper('hasWeapon', function(){
                    return this.weapon != undefined;
                });

                p.registerHelper('whatGoodAnimalDid', function(){
                    if(this.animal.good = 'ёжиек')
                    {
                        if(this.animal.bad == 'змеями')
                        {
                            return 'чуть не съел их';
                        }
                        else if(this.animal.bad == 'львами')
                        {
                            return 'поспешно свалил от них';
                        }
                        else
                        {
                            return 'возможно, огреб от них по полной';
                        }
                    }
                    else if(this.animal.good = 'слон')
                    {
                        return 'растоптал их';
                    }
                    else
                    {
                        return 'вышел покурить';
                    }
                });

                console.dir(p.get(tests[k].data));
            }

        </script>


    </body>
    </html>